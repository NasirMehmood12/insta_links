<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Link Scraper</title>
</head>
<body>
    <h1>Instagram Link Scraper</h1>
    <label for="page-select">Choose an Instagram page:</label>
    <select id="page-select">
        <option value="">-- Select a Page --</option>
        {% for page in pages %}
            <option value="{{ page.name }}">{{ page.name }}</option>
        {% endfor %}
    </select>
    
    <button onclick="fetchLinks()">Get Links</button>

    <h2>Links:</h2>
    <ul id="link-list"></ul>

    <script>
        function fetchLinks() {
            const pageName = document.getElementById("page-select").value;
            if (!pageName) {
                alert("Please select a page.");
                return;
            }

            fetch(`/get-links/${pageName}`)
                .then(response => response.json())
                .then(data => {
                    const list = document.getElementById("link-list");
                    list.innerHTML = "";

                    if (data.links.length === 0) {
                        list.innerHTML = "<li>No recent links found.</li>";
                    } else {
                        data.links.forEach(link => {
                            const li = document.createElement("li");
                            const a = document.createElement("a");
                            a.href = link;
                            a.target = "_blank";
                            a.textContent = link;
                            li.appendChild(a);
                            list.appendChild(li);
                        });
                    }
                })
                .catch(error => console.error("Error fetching links:", error));
        }
    </script>
</body>
</html>